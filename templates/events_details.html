<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../static/css/style.css"  rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link href='https://fonts.googleapis.com/css?family=Yeseva One' rel='stylesheet'>
    <title>Event Details</title>
</head>
<body>
    <style>
        h2, .event_name, .event_details_name, .upcoming_events_heading, .recommended_events_heading, .bookmarked_events_heading {
            font-family: 'Yeseva One';
        }
    </style>
    <nav class="navbar">
        <a class="navbar-brand" href="#">
            <img src="../static/images/logo.png" class="d-inline-block align-top" id="logo">
        </a>
        <div id="signup_login">
            {% if session['user_email'] %}
                <a href="/logout"><button id="logout">Log Out</button></a>
                <a href="/bookmarked"><i class="bi bi-person-circle"></i><span class="session_user_name">{{ session['user_name'] }}</span></a>
            {% else %}
                <a href="/signup"><button id="signup">Sign Up</button></a>
                <a href="/login"><button id="login">Log In</button></a>
            {% endif %}
        </div>
    </nav>
    <div class="row" id="event_details_row">
        <div class="event_details_card">
            <h2 class="event_details_name">{{ event_name }}</h2>
            <br>
            <p class="events_details"><strong>Description:</strong>&emsp;{{ description|safe }}</p>
            <br>
            <p class="events_details"><strong>Details:</strong></p>
            <p class="events_details"><strong>Date:</strong>&nbsp;{{ date }}&emsp;<strong>Time:</strong></strong>&nbsp;{{ time }}&emsp;</p>
            <p class="events_details"><strong>Price:</strong>&nbsp;{{ price }}&emsp;<strong>Venue:</strong></strong>&nbsp;{{ venue }}</p>
            <br>
            {% if register_url == "nan" %}
                <button disabled>Registration Not Open</button>
            {% else %}
                <a href="{{ register_url }}"><button>Register</button></a>
            {% endif %}
        </div>
    </div>
    <div class="row my-4">
        <div id="recommended_events">
            <h4 class="recommended_events_heading">Recommended Events</h4>
            {{ recommended_events_html|safe }}
            <script>
                let buttons = document.getElementById("recommended_events").getElementsByTagName("a");
                let buttons_count = buttons.length;
                for (var i = 0; i <= buttons_count; i += 1) {
                    buttons[i].onclick = function(e) {
                        console.log(this.id);
                        let image = document.getElementById(this.id).getElementsByTagName("img")[0];
                        let type = document.getElementById(this.id).getElementsByTagName("img")[0].getAttribute("class");
                        if (type === "bookmark") {
                            image.setAttribute("class", "bookmarked");
                            image.setAttribute("src", "/static/images/bookmarked.png");
                        } else if (type === "bookmarked") {
                            image.setAttribute("class", "bookmark");
                            image.setAttribute("src", "/static/images/bookmark.png");
                        }
                    };
                };
            </script>
        </div>
    </div>
</body>
</html>